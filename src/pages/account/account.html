<!--
  Generated template for the AccountPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <!--<ion-navbar>
    <ion-title>account</ion-title>
  </ion-navbar>-->
  <ion-row>
    <ion-col col-12>
      <ion-avatar class="logo tabs-logo" text-center>
        <img src="assets/images/logo-small.png" alt="Logo"/>
      </ion-avatar>
    </ion-col>
  </ion-row>

</ion-header>


<ion-content padding>
  <accordion [showArrows]="true" [closeOthers]="false">
    <accordion-group  [isOpened]="true">
      <accordion-heading>
        <div class="white-block-full">
          <ion-row>
            <ion-col>
              <h3 class="padd-10">{{'t_my_account' | translate}}</h3>
            </ion-col>
          </ion-row>
        </div>
      </accordion-heading>
      <div class="block" *ngIf="show_panel_user_info">
        <ion-row>
          <ion-col>
            <h3 *ngIf="is_data">{{userdata.name}}</h3><br />
            <p *ngIf="is_data">{{userdata.email}}</p><br />
            <p *ngIf="is_data">{{userdata.phone}}</p><br />
          </ion-col>
        </ion-row> 
        <ion-row>
          <ion-col text-right>
            <button ion-button class="btn-round-white" type="button" (click)="show_panel_edit_user = true; show_panel_user_info = false">{{'t_edit' | translate}}</button>
          </ion-col>
        </ion-row>
        <p class="success_msg">{{form_success}}</p>
      </div>
      <div class="block" *ngIf="show_panel_edit_user">
        <ion-row>
          <ion-col>
            <form id="edit-user" class="edit-form form" (ngSubmit)="update_settings()" [formGroup]="myForm">
              <ion-list>
                <ion-item>
                  <ion-input  *ngIf="is_data" formControlName="name" type="text" id="name" placeholder="{{'t_full_name' | translate}}" [(ngModel)]="userdata.name" autofocus></ion-input>
                </ion-item>
                <ion-item>
                  <ion-input  *ngIf="is_data" formControlName="email" type="email" id="usr" placeholder="Email" [(ngModel)]="userdata.email"></ion-input>
                </ion-item>
                <ion-item>
                  <ion-input  *ngIf="is_data" formControlName="phone" type="tel" id="tel" placeholder="{{'t_phone' | translate}}" [(ngModel)]="userdata.phone"></ion-input>
                </ion-item>
              </ion-list>
              <ion-row>
                <ion-col text-right>
                  <button ion-button class="btn-round-white" type="submit" >{{'t_save' | translate}}</button>
                </ion-col>
              </ion-row>
              <p class="error_msg">{{form_validation_error}}</p>

            </form>
          </ion-col>
        </ion-row>		
      </div>
    </accordion-group>
    <accordion-group>
      <accordion-heading>
        <div class="white-block-full">
          <ion-row>
            <ion-col>
              <h3 class="padd-10">{{'t_change_password' | translate}}</h3>						  
              <p class="error_msg">{{password_success}}</p>
            </ion-col>
          </ion-row>
        </div>
      </accordion-heading>
      <div class="block">
        <ion-row>
          <ion-col>
            <form id="edit-password" class="edit-form form" (ngSubmit)="update_password()" [formGroup]="changePwdForm">
              <ion-list>
                <ion-item>
                  <ion-label fixed>{{'t_old_password' | translate}}: </ion-label>
                  <ion-input formControlName="old_password" type="password"></ion-input>
                </ion-item>
                <ion-item>
                  <ion-label fixed>{{'t_new_password' | translate}}: </ion-label>
                  <ion-input formControlName="new_password" type="password"></ion-input>
                </ion-item>
                <ion-item>
                  <ion-label fixed>{{'t_password_confirm' | translate}}: </ion-label>
                  <ion-input formControlName="confirm_password" type="password"></ion-input>
                </ion-item>
              </ion-list>
              <ion-row>
                <ion-col text-right>
                  <button ion-button class="btn-round-white" type="submit">{{'t_save' | translate}}</button>
                </ion-col>
              </ion-row>
              <p class="error_msg">{{form_validation_error}}</p>
            </form>
          </ion-col>
        </ion-row>
      </div>
    </accordion-group>
    <accordion-group>
      <accordion-heading>
        <div class="white-block-full">
          <ion-row>
            <ion-col>
              <h3 class="padd-10">{{'t_change_language' | translate}}</h3>
            </ion-col>
          </ion-row>
        </div>
      </accordion-heading>
      <div class="block">
        <form id="lang" class="form">
          <ion-list radio-group>
            <br />
            <ion-item text-center>
              <ion-label>&nbsp; English (EN)</ion-label>
              <ion-radio (click)="change_language('en')" value="cord" checked></ion-radio>
            </ion-item>
            <ion-item text-center>
              <ion-label>&nbsp; Indonesia</ion-label>
              <ion-radio (click)="change_language('in')" value="duesenberg"></ion-radio>
            </ion-item>
          </ion-list>         
        </form>
      </div>
    </accordion-group>
  </accordion>
  <div class="white-block-full">
    <ion-row>
      <ion-col>
        <h3 (click)="logout()" class="padd-10">{{'t_logout' | translate}}</h3>
      </ion-col>
    </ion-row>
  </div>
</ion-content>
